{% extends "base.html" %} {% block content %}

<!--Main layout-->
<main>
  <div class="container">
      <!--Grid row-->
      <div class="row wow fadeIn">
       <!--summary table-->
        <div class="table-responsive text-nowrap">
        <h2>Order Summary</h2>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total Item Price</th>
            </tr>
            </thead>
            <tbody>
             {% for orderItem in object.items.all %}
            <tr>
                <th scope="row">1</th>
                <td>{{ orderItem.item.name }}</td>
                <td>{{ orderItem.item.price }}</td>
                <td><a href="{% url 'core:addToCart' orderItem.item.slug  %}"><i class="fas fa-plus-circle mr-2" ></i></a>
                {{ orderItem.quantity }}
                <a href="{% url 'core:removeOneFromCart' orderItem.item.slug  %}"><i class="fas fa-minus ml-2"></i></a>
                </td>
                {% if orderItem.item.discount_price %}
                <td>{{ orderItem.get_discounted_price }}
                <span class="badge badge-primary"> Saving
                {{ orderItem.get_savings_from_discount }}
                </span>
                </td>
                {% else %}
                <td>{{ orderItem.get_total_price }}</td>

                {% endif %}
                <td><a href="{% url 'core:removeFromCart' orderItem.item.slug  %}"><i class="fas fa-trash-alt"></i></a></td>               
            </tr>
               {% empty %}
            <tr>
                <td colspan="5">Cart is empty</td>
            </tr>
            <tr>
                <td colspan="4" align="right"><a href="/" class="btn btn-primary btn-md my-0 p">
                 Continue Shopping</a></td>
            </tr>
            {% endfor %}
            {% if object.get_total_price %}
            <tr>
                <td colspan="4">Order Total</td>
                <td>{{ object.get_total_price }}</td>
            </tr>
            <tr>
                <td colspan="4" align="right"><a href="/" class="btn btn-primary btn-md my-0 p">
                 Continue Shopping</a></td>
                <td><a href="/checkout" class="btn btn-danger btn-md my-0 p">
                 Checkout</a></td>

            </tr>
            {% endif %}
            </tbody>
        </table>

        </div> 
        <!--summary table-->         
      </div>
      <!--Grid row-->
  </div>
</main>
<!--Main layout-->

{% endblock content %}
